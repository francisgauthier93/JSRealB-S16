function Tokn(a){this.mot=a,this.capitalized=!1;var b=a.charAt(0);b==b.toUpperCase()&&(b=b.toLowerCase(),this.mot=b+this.mot.substring(1),this.capitalized=!0);var c=a.charAt(a.length-1);try{var d=JSrealB.Config.get("lexicon")[c].Pc;void 0==d?this.end="":(this.end=c,this.mot=this.mot.slice(0,-1))}catch(a){this.end=""}if(this.elidable=elidables.indexOf(this.mot)>=0,this.voyelleOuHmuet=!1,voyelles.indexOf(b)>=0)return this.voyelleOuHmuet=!0,void(this.hAn=!0);try{this.lex=JSrealB.Config.get("lexicon")[this.mot]}catch(a){this.lex=""}if("h"===b)if(this.lex)for(cat in this.lex){if(this.lex[cat].hAn){this.hAn=!0;break}if(!this.lex[cat].h){this.voyelleOuHmuet=!0;break}}else this.voyelleOuHmuet=!0}function showTokens(a){return"["+a.map(function(a){return a.toString()}).join(",")+"]"}function aToAn(a,b){if(0==b.length)return a;var c="<"!==a[a.length-1].mot.charAt(0)?a.length-1:a.length-2,d=a[c];return"a"==d.mot&&b[0].hAn?(d.mot="an",this&&a.push(b.shift())):a.push(b.shift()),aToAn(a,b)}function removeLastLetter(a){return a.substring(0,a.length-1)}function remplaceToken(a,b,c){a[b].mot=c,a.splice(b+1,1)}function contracter(a){for(var b=0;b<a.length-1;b++){var c=a[b].mot,d=a[b+1].mot;"à"==c?"le"==d?remplaceToken(a,b,"au"):"les"==d&&remplaceToken(a,b,"aux"):"de"==c?"le"==d?remplaceToken(a,b,"du"):"les"==d?remplaceToken(a,b,"des"):"des"==d?remplaceToken(a,b,"de"):"autres"==d&&remplaceToken(a,b,"d'autres"):"des"==c?"autres"==d&&remplaceToken(a,b,"d'autres"):"si"==c&&("il"==d?remplaceToken(a,b,"s'il"):"ils"==d&&remplaceToken(a,b,"s'ils"))}return a}function eliderMots(a,b){if(0==b.length)return contracter(a);var c="<"!==a[a.length-1].mot.charAt(0)?a.length-1:a.length-2,d=a[c];return d.elidable&&b[0].voyelleOuHmuet?["ma","ta","sa"].indexOf(d.mot)>=0?(d.mot=d.mot.charAt(0)+"on",a.push(b.shift())):"ce"==d.mot?JSrealB.Config.get("rule.elisionEtre.verbe").includes(b[0].mot)||JSrealB.Config.get("rule.elisionEtre.aux").includes(b[0].mot)&&JSrealB.Config.get("rule.elisionEtre.pp").includes(b[1].mot)?(b[0].mot=removeLastLetter(d.mot)+"'"+b[0].mot,b[0].capitalized=d.capitalized,a.splice(c,1),a.push(b.shift())):(d.mot="cet",a.push(b.shift())):(b[0].mot=removeLastLetter(d.mot)+"'"+b[0].mot,b[0].capitalized=d.capitalized,a.splice(c,1),a.push(b.shift())):a.push(b.shift()),eliderMots(a,b)}function extend(a,b){var c=b.prototype;b.prototype=Object.create(a.prototype);for(var d in c)b.prototype[d]=c[d];b.prototype.constructor=b,Object.defineProperty(b.prototype,"constructor",{enumerable:!1,value:b})}function loadLanguage(a,b,c){JSrealLoader({language:b,lexiconUrl:a+"lex-"+b+".json",ruleUrl:a+"rule-"+b+".json",featureUrl:a+"feature.json"},c,function(a){alert(a)})}var JSrealE=function(a,b,c){this.unit=null,this.realization=null,this.category=b,this.fct=null,this.transformation=c||null,this.constructor=b,this.prop={},this.defaultProp={},this.childrenProp={},this.defaultCtx={},this.ctx={},this.parent=null,this.elements=[],this.constituents={head:void 0,modifier:[],subordinate:[],complement:[]},this.initProp={};var d=!0;this.transformation===JSrealE.ruleType.date?this.unit=a:this.transformation===JSrealE.ruleType.number?(d=!1,this.unit=a):isString(a)?(this.unit=a,this.initUnitProperty()):(Array.isArray(a)||isObject(a))&&(this.elements=a,"SP"==this.category&&this.initUnitProperty()),this.initContext(d)};JSrealE.language={english:"en",french:"fr"},JSrealE.ruleType={conjugation:1,declension:2,regular:3,date:4,number:5,none:6},JSrealE.grammaticalFunction={modifier:1,head:2,subordinate:3,complement:4},JSrealE.prototype.initUnitProperty=function(){if(this.transformation!==JSrealE.ruleType.none){this.defaultProp[JSrealB.Config.get("feature.number.alias")]=JSrealB.Config.get("feature.number.singular"),this.defaultProp[JSrealB.Config.get("feature.owner.alias")]=JSrealB.Config.get("feature.owner.singular"),this.category!==JSrealB.Config.get("feature.category.word.verb")&&this.category!==JSrealB.Config.get("feature.category.phrase.verb")||(this.defaultProp[JSrealB.Config.get("feature.tense.alias")]=JSrealB.Config.get("feature.tense.indicative.present"),this.defaultProp[JSrealB.Config.get("feature.cdInfo.alias")]={});var a=JSrealB.Module.Common.getWordFeature(this.unit,this.category,!0),b=null!==a?a[JSrealB.Config.get("feature.gender.alias")]:void 0;void 0!==b?this.defaultProp[JSrealB.Config.get("feature.gender.alias")]=b:this.defaultProp[JSrealB.Config.get("feature.gender.alias")]=JSrealB.Config.get("feature.gender.masculine");var c=null!==a?a[JSrealB.Config.get("feature.person.alias")]:void 0;if(void 0!==c?this.defaultProp[JSrealB.Config.get("feature.person.alias")]=c:this.defaultProp[JSrealB.Config.get("feature.person.alias")]=JSrealB.Config.get("feature.person.p3"),this.category===JSrealB.Config.get("feature.category.word.adjective")){var d=JSrealB.Config.get("lexicon")[this.unit];void 0!=d&&(d=d[JSrealB.Config.get("feature.category.word.adjective")],void 0!=d[JSrealB.Config.get("feature.antepose.alias")]&&d[JSrealB.Config.get("feature.antepose.alias")]==JSrealB.Config.get("feature.antepose.before")?this.defaultProp[JSrealB.Config.get("feature.antepose.alias")]=JSrealB.Config.get("feature.antepose.before"):this.defaultProp[JSrealB.Config.get("feature.antepose.alias")]=JSrealB.Config.get("feature.antepose.default"))}}},JSrealE.prototype.initContext=function(a){this.ctx[JSrealB.Config.get("feature.display_option.alias")]={},this.ctx[JSrealB.Config.get("feature.sentence_type.alias")]={},this.defaultCtx[JSrealB.Config.get("feature.display_option.alias")]={},this.defaultCtx[JSrealB.Config.get("feature.display_option.alias")][JSrealB.Config.get("feature.display_option.natural")]=a,this.defaultCtx[JSrealB.Config.get("feature.display_option.alias")][JSrealB.Config.get("feature.display_option.relative_time")]=!1,this.defaultCtx[JSrealB.Config.get("feature.display_option.alias")][JSrealB.Config.get("feature.display_option.raw")]=!1,this.defaultCtx[JSrealB.Config.get("feature.display_option.alias")][JSrealB.Config.get("feature.display_option.max_precision")]=2,this.defaultCtx[JSrealB.Config.get("feature.display_option.alias")][JSrealB.Config.get("feature.display_option.determiner")]=!0},JSrealE.prototype.getProp=function(a){var b=this.prop[a];return void 0===b?this.getDefaultProp(a):b},JSrealE.prototype.getDefaultProp=function(a){var b=this.defaultProp[a];return void 0===b?null:b},JSrealE.prototype.getChildrenProp=function(a){var b=this.childrenProp[a];return void 0===b?null:b},JSrealE.prototype.setProp=function(a,b){return void 0===this.prop[a]&&(this.prop[a]=b),this},JSrealE.prototype.setDefaultProp=function(a,b){return this.defaultProp[a]=b,this},JSrealE.prototype.setChildrenProp=function(a,b){return this.childrenProp[a]=b,this},JSrealE.prototype.getCtx=function(a){var b=fetchFromObject(this.ctx,a);return void 0===b?this.getDefaultCtx(a):Array.isArray(b)&&1==b.length?b[0]:b},JSrealE.prototype.getDefaultCtx=function(a){var b=fetchFromObject(this.defaultCtx,a);return void 0===b?null:b},JSrealE.prototype.setCtx=function(a,b){if(void 0===fetchFromObject(this.ctx,a)){var b=[b];fetchFromObject(this.ctx,a,b)}else addToObjectList(this.ctx,a,b);return this},JSrealE.prototype.addConstituent=function(a,b){switch(b){case JSrealE.grammaticalFunction.modifier:a.fct=JSrealE.grammaticalFunction.modifier,this.constituents.modifier.push(a);break;case JSrealE.grammaticalFunction.head:if(void 0===this.constituents.head||null===this.constituents.head){a.fct=JSrealE.grammaticalFunction.head,this.constituents.head=a;break}case JSrealE.grammaticalFunction.subordinate:a.fct=JSrealE.grammaticalFunction.subordinate,this.constituents.subordinate.push(a);break;case JSrealE.grammaticalFunction.complement:a.fct=JSrealE.grammaticalFunction.complement,this.constituents.complement.push(a)}},JSrealE.prototype.setInitProp=function(a,b){return this.initProp[a]=b,this},JSrealE.prototype.getInitProp=function(a){var b=this.initProp[a];return void 0===b?null:b},JSrealE.prototype.topDownFeaturePropagation=function(a,b,c){if(void 0!==b&&void 0!==c&&b.length!==c.length)return!1;var e,f,d=void 0===b?Object.keys(this.prop).concat(Object.keys(this.defaultProp)):b;for(e=0,f=d.length;e<f;e++)a.setProp(d[e],void 0===c?this.getProp(d[e]):c[e]);return!0},JSrealE.prototype.siblingFeaturePropagation=function(a,b,c){if(void 0!==b&&void 0!==c&&b.length!==c.length)return!1;var e,f,d=void 0===b?Object.keys(this.prop).concat(Object.keys(this.defaultProp)).concat(Object.keys(this.childrenProp)):b;for(e=0,f=d.length;e<f;e++)void 0!==c?a.setDefaultProp(d[e],c[e]):null!==this.getChildrenProp(d[e])?a.setDefaultProp(d[e],this.getChildrenProp(d[e])):a.setDefaultProp(d[e],this.getProp(d[e]));return!0},JSrealE.prototype.bottomUpFeaturePropagation=function(a,b,c){if(void 0!==b&&void 0!==c&&b.length!==c.length)return!1;var e,f,d=void 0===b?Object.keys(this.prop).concat(Object.keys(this.defaultProp)).concat(Object.keys(this.childrenProp)):b;for(e=0,f=d.length;e<f;e++)void 0!==c?a.setChildrenProp(d[e],c[e]):null!==this.getChildrenProp(d[e])?a.setChildrenProp(d[e],this.getChildrenProp(d[e])):a.setChildrenProp(d[e],this.getProp(d[e]));return!0},JSrealE.prototype.toObject=function(){var a=this.category;if(null!=this.unit){a+='("'+this.unit+'")';for(prop in this.initProp)a+="."+prop+'("'+this.initProp[prop]+'")'}else{a+="(";for(var b=0,c=this.elements.length;b<c;b++)a+=this.elements[b].toObject(),b<c-1&&(a+=",");a+=")"}return a},JSrealE.prototype.clone=function(){var native=this.toObject(),native2=eval(native);return native2},JSrealE.prototype.t=function(a){if(!contains(JSrealB.Config.get("feature.tense"),a))throw JSrealB.Exception.invalidInput(a,"tense");return this.setInitProp(JSrealB.Config.get("feature.tense.alias"),a),this.setProp(JSrealB.Config.get("feature.tense.alias"),a)},JSrealE.prototype.pe=function(a){if(!isNumeric(a)||a<1||a>3)throw JSrealB.Exception.invalidInput(a,"person");return this.setInitProp(JSrealB.Config.get("feature.person.alias"),a),this.setProp(JSrealB.Config.get("feature.person.alias"),isString(a)?intVal(a):a)},JSrealE.prototype.g=function(a){if(!contains(JSrealB.Config.get("feature.gender"),a))throw JSrealB.Exception.invalidInput(a,"gender");return this.setInitProp(JSrealB.Config.get("feature.gender.alias"),a),this.setProp(JSrealB.Config.get("feature.gender.alias"),a)},JSrealE.prototype.n=function(a){if(!contains(JSrealB.Config.get("feature.number"),a))throw JSrealB.Exception.invalidInput(a,"number");return this.setInitProp(JSrealB.Config.get("feature.number.alias"),a),this.setProp(JSrealB.Config.get("feature.number.alias"),a)},JSrealE.prototype.f=function(a){if(!contains(JSrealB.Config.get("feature.form"),a))throw JSrealB.Exception.invalidInput(a,"form");return this.setProp(JSrealB.Config.get("feature.form.alias"),a)},JSrealE.prototype.ow=function(a){if(!contains(JSrealB.Config.get("feature.owner"),a))throw JSrealB.Exception.invalidInput(a,"owner");return this.setInitProp(JSrealB.Config.get("feature.owner.alias"),a),this.setProp(JSrealB.Config.get("feature.owner.alias"),a)},JSrealE.prototype.pos=function(a){if(!contains(JSrealB.Config.get("feature.antepose"),a))throw JSrealB.Exception.invalidInput(a,"antéposé");return this.setProp(JSrealB.Config.get("feature.antepose.alias"),a)},JSrealE.prototype.cap=function(a){if(!isBoolean(a)&&void 0!==a)throw JSrealB.Exception.invalidInput(a,"ucf");return this.setCtx(JSrealB.Config.get("feature.typography.ucfist"),void 0===a||a===!0)},JSrealE.prototype.b=function(a){return this.setCtx(JSrealB.Config.get("feature.typography.before"),a)},JSrealE.prototype.a=function(a){return this.setCtx(JSrealB.Config.get("feature.typography.after"),a)},JSrealE.prototype.en=function(a){return this.setCtx(JSrealB.Config.get("feature.typography.surround"),a)},JSrealE.prototype.lier=function(){return this.setCtx(JSrealB.Config.get("feature.liaison.alias"),!0)},JSrealE.prototype.typ=function(a){if(void 0!==a&&isObject(a)){for(var b=Object.keys(a),c=0,d=b.length;c<d;c++)JSrealB.Config.get("feature.sentence_type.context_wise").indexOf(b[c])>=0?this.setCtx(JSrealB.Config.get("feature.sentence_type.alias")+"."+b[c],a[b[c]]):(this.setProp(JSrealB.Config.get("feature.verb_option.alias")+"."+b[c],a[b[c]]),this.setInitProp(JSrealB.Config.get("feature.verb_option.alias")+"."+b[c],a[b[c]]));return this}return null},JSrealE.prototype.perf=function(a){if("boolean"!=typeof a)throw JSrealB.Exception.invalidInput(a,"perfect tense");return a&&(this.setProp(JSrealB.Config.get("feature.verb_option.alias")+"."+JSrealB.Config.get("feature.verb_option.perfect"),!0),this.setInitProp(JSrealB.Config.get("feature.verb_option.alias")+"."+JSrealB.Config.get("feature.verb_option.perfect"),!0)),this},JSrealE.prototype.aux=function(a){try{if(!contains(JSrealB.Config.get("rule.compound.aux"),a))throw JSrealB.Exception.invalidInput(a,"auxiliary");return this.setProp(JSrealB.Config.get("rule.compound.alias"),a)}catch(a){return this}},JSrealE.prototype.nat=function(a){if(!isBoolean(a)&&void 0!==a)throw JSrealB.Exception.invalidInput(a,"natural");return this.setCtx(JSrealB.Config.get("feature.display_option.alias")+"."+JSrealB.Config.get("feature.display_option.natural"),void 0===a||a===!0)},JSrealE.prototype.dOpt=function(a){if(void 0!==a&&isObject(a)){for(var b=Object.keys(a),c=0,d=b.length;c<d;c++)this.setCtx(JSrealB.Config.get("feature.display_option.alias")+"."+b[c],a[b[c]]);return this}return null},JSrealE.prototype.tag=function(a,b){return this.setCtx(JSrealB.Config.get("feature.html.element"),a),this.setCtx(JSrealB.Config.get("feature.html.attribute"),b),this},JSrealE.prototype.sortWord=function(){},JSrealE.prototype.phraseToElementPropagation=function(a){return a.fct===JSrealE.grammaticalFunction.modifier?this.topDownFeaturePropagation(a):a.fct===JSrealE.grammaticalFunction.head?this.topDownFeaturePropagation(a):a.fct===JSrealE.grammaticalFunction.subordinate&&null===this.constituents.head&&this.topDownFeaturePropagation(a),this},JSrealE.prototype.elementToElementPropagation=function(a){if(a.fct===JSrealE.grammaticalFunction.modifier)null!==this.constituents.head&&a.siblingFeaturePropagation(this.constituents.head);else if(a.fct===JSrealE.grammaticalFunction.head)for(var b=0,c=this.constituents.subordinate.length;b<c;b++)a.siblingFeaturePropagation(this.constituents.subordinate[b])},JSrealE.prototype.elementToPhrasePropagation=function(a){a.fct===JSrealE.grammaticalFunction.head&&a.bottomUpFeaturePropagation(this)},JSrealE.prototype.toString=function(){return this.real()},JSrealE.prototype.real=function(){if(this.elements.length>0){if(this.sortWord(),void 0!==this.constituents.head){var a=this.createRealizationList();return this.realizeGroup(a),this.modifyStructure(),this.realization=this.printElements(),this.typography(this.html(this.phonetic(this.realization)))}throw JSrealB.Exception.headWordNotFound(this.category)}var b=this.realizeTerminalElement();return this.typography(this.html(this.phonetic(b)))},JSrealE.prototype.createRealizationList=function(){var a=[];return void 0!==this.constituents.modifier&&this.constituents.modifier.length>0&&(a=a.concat(this.constituents.modifier)),void 0!==this.constituents.head&&null!==this.constituents.head&&a.push(this.constituents.head),void 0!==this.constituents.subordinate&&this.constituents.subordinate.length>0&&(a=a.concat(this.constituents.subordinate)),void 0!==this.constituents.complement&&this.constituents.complement.length>0&&(a=a.concat(this.constituents.complement)),a},JSrealE.prototype.realizeGroup=function(a){var b,c,d=null;for(b=0,c=a.length;b<c;b++)d=a[b],d.parent=this,this.phraseToElementPropagation(d),d.realization=d instanceof JSrealE?d.real():"",this.elementToElementPropagation(d),this.elementToPhrasePropagation(d)},JSrealE.prototype.add=function(a,b){var b=b||this.elements.length;this.constituents={head:void 0,modifier:[],subordinate:[],complement:[]},this.addNewElement(b,a),this.sortWord()},JSrealE.prototype.deleteElement=function(a){for(var b=this.elements.length,c=a;c<b;c++)this.elements[c]=this.elements[c+1];delete this.elements[c+1],this.elements.length-=1},JSrealE.prototype.addNewElement=function(a,b){b instanceof JSrealE&&(b.parent=this);var c=this.elements.length,d=this.elements[a];this.elements[a]=b;for(var e=a+1;e<c+1;e++){var f=this.elements[e];this.elements[e]=d,d=f}this.elements.length+=1},JSrealE.prototype.getTreeRoot=function(a){if(a=a||!0,this.category==JSrealB.Config.get("feature.category.phrase.sentence"))return this;if(!a&&this.category==JSrealB.Config.get("feature.category.phrase.propositional"))return this;if(null!=this.parent)return this.parent.getTreeRoot(a);throw"Could not find tree root (S or SP)"},JSrealE.prototype.resetProp=function(a){this.childrenProp={},"VP"==this.category&&this.initUnitProperty(),this.prop={};for(var b in this.initProp)this.setProp(b,this.initProp[b]);if(this.prop["vOpt.pas"]=!1,this.elements.length>0&&(this.constituents={head:void 0,modifier:[],subordinate:[],complement:[]}),a)for(var c=this.elements.length,d=0;d<c;d++){var e=this.elements[d];e instanceof JSrealE&&e.resetProp(a)}};var getSubject=function(a){if(a.category==JSrealB.Config.get("feature.category.phrase.sentence")||a.category==JSrealB.Config.get("feature.category.phrase.propositional")){for(var b=a.elements,c=b.length,d=-1,e=0;e<c&&((b[e].category==JSrealB.Config.get("feature.category.phrase.noun")||b[e].category==JSrealB.Config.get("feature.category.word.pronoun")&&b[e].unit==JSrealB.Config.get("rule.usePronoun.S"))&&(d=e),b[e].category!=JSrealB.Config.get("feature.category.phrase.verb"));e++);return d}throw"Not a Sentence type, could not find subject"},getGroup=function(a,b){for(var c=a.elements,d=c.length,e=-1,f=0;f<d;f++)if(c[f].category==b)return e=f;return e};JSrealE.prototype.modifyStructure=function(){var a=this.elements,b=!1;a.length;if(1==this.getChildrenProp(JSrealB.Config.get("feature.verb_option.alias")+".pas")&&this.category==JSrealB.Config.get("feature.category.phrase.verb")){var d=this.getTreeRoot(),e=this.constituents.head;if(this.recursion=null==this.recursion?1:this.recursion+1,null!=this.recursion&&this.recursion>10)return JSrealB.Logger.alert("Could not resolve the passive tense of "+e.unit),this.childrenProp[JSrealB.Config.get("feature.verb_option.alias")+".pas"]=!1,"";var f=getSubject(d),g=getGroup(this,JSrealB.Config.get("feature.category.phrase.noun")),h=getGroup(this,JSrealB.Config.get("feature.category.word.verb"));if(f!=-1&&g!=-1){var i=d.elements[f];i.category==JSrealB.Config.get("feature.category.word.pronoun")&&(i.unit=JSrealB.Config.get("rule.usePronoun."+JSrealB.Config.get("feature.category.word.pronoun")));var j=a[g];d.elements[f]=j,a[g]=i,e.setInitProp("vOpt.pas",!0),e.setInitProp("vOpt.hasSubject",!0),d.resetProp(!0),b=!0}else if(f!=-1){var i=d.elements[f];i.category==JSrealB.Config.get("feature.category.word.pronoun")&&(i.unit=JSrealB.Config.get("rule.usePronoun."+JSrealB.Config.get("feature.category.word.pronoun"))),this.addNewElement(h+1,d.elements[f]),d.deleteElement(f),e.setInitProp("vOpt.pas",!0),e.setInitProp("vOpt.hasSubject",!0),d.resetProp(!0),b=!0}else if(g!=-1){var k=getGroup(d,JSrealB.Config.get("feature.category.phrase.verb"));d.addNewElement(k,a[g]),this.deleteElement(g),e.setInitProp("vOpt.pas",!0),d.resetProp(!0),b=!0}}if(1==this.getCtx(JSrealB.Config.get("feature.toPronoun.alias")))try{var d=this.parent,l=getGroup(d,JSrealB.Config.get("feature.category.phrase.noun")),m=JSrealB.Config.get("rule.usePronoun."+d.category),n=new Pro(m).pe(this.getChildrenProp(JSrealB.Config.get("feature.person.alias"))).n(this.getChildrenProp(JSrealB.Config.get("feature.number.alias"))).g(this.getChildrenProp(JSrealB.Config.get("feature.gender.alias"))),o={n:this.getChildrenProp(JSrealB.Config.get("feature.number.alias")),g:this.getChildrenProp(JSrealB.Config.get("feature.gender.alias"))};switch(d.deleteElement(l),d.category){case JSrealB.Config.get("feature.category.phrase.sentence"):case JSrealB.Config.get("feature.category.phrase.prepositional"):d.addNewElement(l,n),this.ctx[JSrealB.Config.get("feature.toPronoun.alias")]=!1;break;case JSrealB.Config.get("feature.category.phrase.verb"):if(JSrealB.Config.get("language")==JSrealE.language.english)d.addNewElement(l,n),d.resetProp(!0);else{var p=getGroup(d,JSrealB.Config.get("feature.category.word.verb"));d.addNewElement(p,n),d.resetProp(!0);var p=getGroup(d,JSrealB.Config.get("feature.category.word.verb"));d.elements[p].setProp(JSrealB.Config.get("feature.cdInfo.alias"),o)}}b=!0}catch(a){console.log("Cette pronominalisation n'est pas supportée: "+a)}if(this.getChildrenProp(JSrealB.Config.get("feature.tense.alias"))==JSrealB.Config.get("feature.tense.imperative.present")&&this.category==JSrealB.Config.get("feature.category.phrase.sentence")){var q=getSubject(this);q!=-1&&(this.deleteElement(q),b=!0)}var r=this.getCtx(JSrealB.Config.get("feature.sentence_type.alias"))[JSrealB.Config.get("feature.sentence_type.interrogative")];if(void 0!=r&&0!=r&&(contains(JSrealB.Config.get("feature.sentence_type.interro_prefix"),r)&&1!=r||(r="base"),b=this.interrogationForm(r)),b){var s=this.getTreeRoot(),t=s.toString();return t}return""},JSrealE.prototype.arrangeNP=function(a){for(var b=-1,c=[],d=0,f=a.length;d<f;d++){var g=a[d].category;g==JSrealB.Config.get("feature.category.word.noun")?b=d:g!=JSrealB.Config.get("feature.category.word.adjective")&&g!=JSrealB.Config.get("feature.category.phrase.adjective")||c.push(d)}if(c==[])return a;for(var d=0;d<c.length;d++){var h=c[d],i=a[h];a[h].getProp(JSrealB.Config.get("feature.antepose.alias"))==JSrealB.Config.get("feature.antepose.before")?h>b&&(this.deleteElement(h),this.addNewElement(b,i)):a[h].getProp(JSrealB.Config.get("feature.antepose.alias"))==JSrealB.Config.get("feature.antepose.after")&&h<b&&(this.deleteElement(h),this.addNewElement(b,i))}return a},JSrealE.prototype.printElements=function(){var a=this.elements,b=" ",c=" ";this.category===JSrealB.Config.get("feature.category.phrase.noun")&&JSrealB.Config.get("language")==JSrealE.language.french&&(a=this.arrangeNP(a));var d=this.getCtx(JSrealB.Config.get("feature.category.word.conjunction"));if(this.category===JSrealB.Config.get("feature.category.phrase.coordinated")&&null!==d){JSrealB.Module.Punctuation.isValid(d)?(b=JSrealB.Module.Punctuation.after("",d),c=b):(b=", ",c=" "+d+" ");for(var e=[],f=0,g=0,h=a.length;f<h;f++)a[f].category!==JSrealB.Config.get("feature.category.word.conjunction")&&(e[g++]=a[f]);a=e}var i=this.printEachElement(a,b,c),j=!1,k=!1;if(null===this.parent&&this.category===JSrealB.Config.get("feature.category.phrase.sentence")){j=null===this.getCtx(JSrealB.Config.get("feature.typography.surround")),k=null===this.getCtx(JSrealB.Config.get("feature.typography.ucfist"));var l="",m=this.getCtx(JSrealB.Config.get("feature.sentence_type.interrogative"));1==m&&(l+=JSrealB.Config.get("rule.sentence_type.int.punctuation"));var n=this.getCtx(JSrealB.Config.get("feature.sentence_type.alias"))[JSrealB.Config.get("feature.sentence_type.exclamative")];1==n&&(l+=JSrealB.Config.get("rule.sentence_type.exc.punctuation")),"en"==JSrealB.Config.get("language")&&"?!"==l&&(l="?"),void 0==l&&(l+=JSrealB.Config.get("rule.sentence_type.dec.punctuation"))}return i=phraseFormatting(i,k,j,l)},JSrealE.prototype.printEachElement=function(a,b,c){var e,f,d="",g="",h=null;for(e=0,f=a.length;e<f;e++)h=a[e],g=e===f-1?"":h instanceof JSrealE&&1==h.getCtx(JSrealB.Config.get("feature.liaison.alias"))?"-":e===f-2?c:b,h instanceof JSrealE?null!==h.realization&&void 0!==h.realization?d+=h.realization+g:null!==h.unit&&void 0!==h.unit?d+="[["+h.unit+"]]"+g:JSrealB.Logger.alert("Undefined unit and realization attributes of element : "+JSON.stringify(h)):isString(h)&&(d+=h+g);return d},JSrealE.prototype.realizeTerminalElement=function(){if(0===this.elements.length){if(this.transformation===JSrealE.ruleType.declension)return this.realizeDeclension();if(this.transformation===JSrealE.ruleType.conjugation){var a=this.realizeConjugation();try{var b=this.getTreeRoot(!0).getCtx(JSrealB.Config.get("feature.sentence_type.alias")+"."+JSrealB.Config.get("feature.sentence_type.interrogative"));"en"!=JSrealB.Config.get("language")||1!=b&&!contains(JSrealB.Config.get("feature.sentence_type.interro_prefix"),b)&&null==this.getTreeRoot(!0).getCtx("firstAux")||(a=this.putAuxInFront(a))}catch(a){console.warn("No sentence:"+a)}return a}return this.transformation===JSrealE.ruleType.regular?this.realizeRegularTransformation():this.transformation===JSrealE.ruleType.none?this.unit:this.transformation===JSrealE.ruleType.date?this.realizeDate():this.transformation===JSrealE.ruleType.number?this.realizeNumber():"[["+this.unit+"]]"}return null},JSrealE.prototype.putAuxInFront=function(a){for(var b=a.split(" "),c=/\s*(<[^>]*>)|\s+/gi,b=a.split(c),d=0,e=b.length;d<e;d++)void 0===b[d]&&b.splice(d,1);var f=b.length;if(f>=2)var g=b.map(function(a){return new Tokn(a)});var h=this.getTreeRoot();h.setCtx("firstAux",g[0].toString()),g.shift(),newMots="";for(var i=0,j=g.length;i<j;i++)newMots+=g[i]+("<"===g[i].mot.charAt(0)||i+1<j&&"</"===g[i+1].mot.slice(0,2)||i+1>=j?"":" ");return newMots},JSrealE.prototype.realizeConjugation=function(){var a=this.getProp(JSrealB.Config.get("feature.tense.alias"));a==JSrealB.Config.get("feature.tense.imperative.present")&&(this.defaultProp[JSrealB.Config.get("feature.person.alias")]=JSrealB.Config.get("feature.person.p2"));var b=this.getProp(JSrealB.Config.get("feature.person.alias")),c=this.getProp(JSrealB.Config.get("feature.number.alias")),d=this.getProp(JSrealB.Config.get("feature.gender.alias")),e={neg:this.getProp(JSrealB.Config.get("feature.verb_option.alias")+"."+JSrealB.Config.get("feature.verb_option.negation")),pas:this.getProp(JSrealB.Config.get("feature.verb_option.alias")+"."+JSrealB.Config.get("feature.verb_option.passive"))||this.getInitProp(JSrealB.Config.get("feature.verb_option.alias")+"."+JSrealB.Config.get("feature.verb_option.passive")),prog:this.getProp(JSrealB.Config.get("feature.verb_option.alias")+"."+JSrealB.Config.get("feature.verb_option.progressive")),perf:this.getProp(JSrealB.Config.get("feature.verb_option.alias")+"."+JSrealB.Config.get("feature.verb_option.perfect")),hasSubject:this.getProp(JSrealB.Config.get("feature.verb_option.alias")+".hasSubject")};try{e.interro=this.getTreeRoot(!0).getCtx(JSrealB.Config.get("feature.sentence_type.alias")+"."+JSrealB.Config.get("feature.sentence_type.interrogative")),null!=this.getTreeRoot(!0).getCtx("firstAux")&&(e.interro="old")}catch(a){}var f=this.getProp(JSrealB.Config.get("rule.compound.alias"));try{if(contains(JSrealB.Config.get("rule.compound.aux"),f))var g=f}catch(a){var g=""}var h=this.getProp(JSrealB.Config.get("feature.cdInfo.alias"));return 1==this.getInitProp(JSrealB.Config.get("feature.verb_option.alias")+"."+JSrealB.Config.get("feature.verb_option.passive"))&&(e.pas=!0),1!=e.prog&&1!=e.pas&&1!=e.perf&&(e.native=!0),c===JSrealB.Config.get("feature.number.plural")&&(b+=3),JSrealB.Module.Conjugation.conjugate(this.unit,a,b,d,e,h,g)},JSrealE.prototype.getFirst=function(a){for(var b=0,c=this.elements.length;b<c;b++)if(this.elements[b].category==a||"any"==a)return this.elements[b];return null},JSrealE.prototype.realizeDeclension=function(){var a={};return a[JSrealB.Config.get("feature.gender.alias")]=this.getProp(JSrealB.Config.get("feature.gender.alias")),a[JSrealB.Config.get("feature.number.alias")]=this.getProp(JSrealB.Config.get("feature.number.alias")),a[JSrealB.Config.get("feature.form.alias")]=this.getProp(JSrealB.Config.get("feature.form.alias")),a[JSrealB.Config.get("feature.person.alias")]=this.getProp(JSrealB.Config.get("feature.person.alias")),a[JSrealB.Config.get("feature.owner.alias")]=this.getProp(JSrealB.Config.get("feature.owner.alias")),JSrealB.Module.Declension.decline(this.unit,this.category,a)},JSrealE.prototype.realizeRegularTransformation=function(){return JSrealB.Module.RegularRule.apply(this.unit,this.category)},JSrealE.prototype.realizeDate=function(){var a;if(this.unit instanceof Date)a=this.unit;else{if("string"==typeof this.unit&&this.unit.length>0&&"Invalid Date"===new Date(this.unit).toString())throw JSrealB.Exception.wrongDate(this.unit);a="string"==typeof this.unit?new Date(this.unit):new Date}return this.getCtx(JSrealB.Config.get("feature.display_option.alias")+"."+JSrealB.Config.get("feature.display_option.relative_time"))?JSrealB.Module.Date.toRelativeTime(a,this.getCtx(JSrealB.Config.get("feature.display_option.alias"))):this.getCtx(JSrealB.Config.get("feature.display_option.alias")+"."+JSrealB.Config.get("feature.display_option.natural"))?JSrealB.Module.Date.toWord(a,this.getCtx(JSrealB.Config.get("feature.display_option.alias"))):JSrealB.Module.Date.formatter(a,this.getCtx(JSrealB.Config.get("feature.display_option.alias")))},JSrealE.prototype.realizeNumber=function(){var a=this,b=this.unit,c=function(b){a.setDefaultProp(JSrealB.Config.get("feature.number.alias"),b)};if(this.getCtx(JSrealB.Config.get("feature.display_option.alias")+"."+JSrealB.Config.get("feature.display_option.raw")))return b.toString();if(!this.getCtx(JSrealB.Config.get("feature.display_option.alias")+"."+JSrealB.Config.get("feature.display_option.natural")))return JSrealB.Module.Number.formatter(b,this.getCtx(JSrealB.Config.get("feature.display_option.alias")+"."+JSrealB.Config.get("feature.display_option.max_precision")),c).toString();try{var d=this.parent.constituents.head;if(null!==d)var e=d.getProp(JSrealB.Config.get("feature.gender.alias"));else var e="m";return JSrealB.Module.Number.toWord(b,this.getCtx(JSrealB.Config.get("feature.display_option.alias")+"."+JSrealB.Config.get("feature.display_option.max_precision")),c,JSrealB.Config.get("language"),e).toString()}catch(a){console.warn("Error with number to word:"+a)}},JSrealE.prototype.typography=function(a){var b=a;this.getCtx(JSrealB.Config.get("feature.typography.ucfist"))===!0&&(b=b.charAt(0).toUpperCase()+b.slice(1));var c=this.getCtx(JSrealB.Config.get("feature.typography.before"));null!==c&&(b=JSrealB.Module.Punctuation.before(b,c));var d=this.getCtx(JSrealB.Config.get("feature.typography.after"));null!==d&&(b=JSrealB.Module.Punctuation.after(b,d));var e=this.getCtx(JSrealB.Config.get("feature.typography.surround"));return null!==e&&(b=JSrealB.Module.Punctuation.surround(b,e)),trim(b)},JSrealE.prototype.html=function(a){var b=a,c=this.getCtx(JSrealB.Config.get("feature.html.element")),d=this.getCtx(JSrealB.Config.get("feature.html.attribute")),e=function(a,c){var d="";if(null!==c&&void 0!==c)for(var e=Object.keys(c),f=e.length,g=0;g<f;g++)d+=" "+e[g]+'="'+c[e[g]]+'"';return"<"+a+d+">"+b+"</"+a+">"};if(null!==c)if(Array.isArray(c))for(var d=d||[];c.length>0;){var f=c.pop(),g=d.pop();b=e(f,g)}else b=e(c,d);return b},JSrealE.prototype.phonetic=function(a){for(var b=a,c=b.split(" "),d=/\s*(<[^>]*>)|\s+/gi,c=b.split(d),e=0,f=c.length;e<f;e++)void 0===c[e]&&c.splice(e,1);var g=c.length;if(g>=2){var h=c.map(function(a){return new Tokn(a)});h="fr"==JSrealB.Config.get("language")?eliderMots([h.shift()],h):aToAn([h.shift()],h),b="";for(var i=0,j=h.length;i<j;i++)b+=h[i]+("<"===h[i].mot.charAt(0)||i+1<j&&"</"===h[i+1].mot.slice(0,2)||i+1>=j?"":" ")}return b};var phraseFormatting=function(a,b,c,d,e){d=d||".",e=e||null;var f=a.replace(/\s{2,}/g," ");if(null!=e&&(f=e+" "+f),b){var g=stripLeftHtml(f);f=("<"===f.charAt(0)?f.slice(0,f.indexOf(g)):"")+g.charAt(0).toUpperCase()+g.slice(1)}return c&&(f=JSrealB.Module.Punctuation.isValid(d)?JSrealB.Module.Punctuation.after(f,d):JSrealB.Module.Punctuation.after(f,".")),f=trim(f)},voyellesAccentuées="àäéèêëïîöôùû",voyelles="aeiou"+voyellesAccentuées,elidables=["la","ma","ta","sa","le","me","te","se","ce","de","ne","je","si","que","jusque","lorsque","puisque","quoique"];Tokn.prototype.toString=function(){return this.capitalized?this.mot.charAt(0).toUpperCase()+this.mot.substring(1)+this.end:this.mot+this.end};var N=function(a){return new JSrealE(a,JSrealB.Config.get("feature.category.word.noun"),JSrealE.ruleType.declension)},A=function(a){return new JSrealE(a,JSrealB.Config.get("feature.category.word.adjective"),JSrealE.ruleType.declension);
},Pro=function(a){return new JSrealE(a,JSrealB.Config.get("feature.category.word.pronoun"),JSrealE.ruleType.declension)},D=function(a){return new JSrealE(a,JSrealB.Config.get("feature.category.word.determiner"),JSrealE.ruleType.declension)},V=function(a){return new JSrealE(a,JSrealB.Config.get("feature.category.word.verb"),JSrealE.ruleType.conjugation)};V.prototype.putAuxInFront=function(a){for(var b=a.split(" "),c=/\s*(<[^>]*>)|\s+/gi,b=a.split(c),d=0,e=b.length;d<e;d++)void 0===b[d]&&b.splice(d,1);var f=b.length;if(f>=2){b.map(function(a){return new Tokn(a)})}return console.log(b),a};var Adv=function(a){return JSrealB.Config.get("language")===JSrealE.language.english?new JSrealE(a,JSrealB.Config.get("feature.category.word.adverb"),JSrealE.ruleType.declension):new JSrealE(a,JSrealB.Config.get("feature.category.word.adverb"),JSrealE.ruleType.regular)},P=function(a){return new JSrealE(a,JSrealB.Config.get("feature.category.word.preposition"),JSrealE.ruleType.regular)},C=function(a){return new JSrealE(a,JSrealB.Config.get("feature.category.word.conjunction"),JSrealE.ruleType.none)},S=function(a){return this instanceof S?void JSrealE.call(this,a,JSrealB.Config.get("feature.category.phrase.sentence")):JSrealB.Config.get("language")===JSrealE.language.french?new S_FR(arguments):new S_EN(arguments)};extend(JSrealE,S),S.prototype.sortWord=function(){this.constituents.head=null;for(var a,b=0,c=this.elements.length;b<c;b++)switch(a=this.elements[b],a.category){case JSrealB.Config.get("feature.category.phrase.verb"):case JSrealB.Config.get("feature.category.word.verb"):this.addConstituent(a,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.phrase.noun"):case JSrealB.Config.get("feature.category.phrase.coordinated"):case JSrealB.Config.get("feature.category.word.pronoun"):if(null===this.constituents.head){this.addConstituent(a,JSrealE.grammaticalFunction.modifier);break}case JSrealB.Config.get("feature.category.phrase.adjective"):case JSrealB.Config.get("feature.category.phrase.adverb"):this.addConstituent(a,JSrealE.grammaticalFunction.subordinate);break;default:this.addConstituent(a,JSrealE.grammaticalFunction.complement)}return this};var SP=function(a){return this instanceof SP?void JSrealE.call(this,a,JSrealB.Config.get("feature.category.phrase.propositional"),JSrealE.ruleType.none):new SP(arguments)};extend(JSrealE,SP),SP.prototype.sortWord=function(){this.constituents.head=null;for(var a,b=0,c=this.elements.length;b<c;b++)switch(a=this.elements[b],a.category){case JSrealB.Config.get("feature.category.phrase.verb"):this.addConstituent(a,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.phrase.noun"):case JSrealB.Config.get("feature.category.phrase.coordinated"):case JSrealB.Config.get("feature.category.word.pronoun"):if(null===this.constituents.head){this.addConstituent(a,JSrealE.grammaticalFunction.modifier);break}case JSrealB.Config.get("feature.category.phrase.adjective"):case JSrealB.Config.get("feature.category.phrase.adverb"):this.addConstituent(a,JSrealE.grammaticalFunction.subordinate);break;default:this.addConstituent(a,JSrealE.grammaticalFunction.complement)}};var S_FR=function(a){S.call(this,a)};extend(S,S_FR);var S_EN=function(a){S.call(this,a)};extend(S,S_EN),S_FR.prototype.interrogationForm=function(a){switch(a){case JSrealB.Config.get("feature.sentence_type.interro_prefix.default"):case JSrealB.Config.get("feature.sentence_type.interro_prefix.yesOrNo"):case JSrealB.Config.get("feature.sentence_type.interro_prefix.where"):case JSrealB.Config.get("feature.sentence_type.interro_prefix.how"):break;case JSrealB.Config.get("feature.sentence_type.interro_prefix.whoSubject"):var b=getSubject(this);b!=-1&&this.deleteElement(b);break;case JSrealB.Config.get("feature.sentence_type.interro_prefix.whoDirect"):case JSrealB.Config.get("feature.sentence_type.interro_prefix.whatDirect"):var c=getGroup(this,JSrealB.Config.get("feature.category.phrase.verb")),d=getGroup(this.elements[c],JSrealB.Config.get("feature.category.phrase.noun")),e=getGroup(this.elements[c],JSrealB.Config.get("feature.category.word.verb")),f=getGroup(this.elements[c],JSrealB.Config.get("feature.category.word.pronoun"));c!=-1&&d!=-1&&this.elements[c].deleteElement(d),c!=-1&&f!=-1&&e!=-1&&f<e&&this.elements[c].deleteElement(f);break;case JSrealB.Config.get("feature.sentence_type.interro_prefix.whoIndirect"):var c=getGroup(this,JSrealB.Config.get("feature.category.phrase.verb")),g=getGroup(this.elements[c],JSrealB.Config.get("feature.category.phrase.prepositional"));c!=-1&&g!=-1&&this.elements[c].deleteElement(g)}return this.addNewElement(0,JSrealB.Config.get("rule.sentence_type.int.prefix")[a]),fetchFromObject(this.ctx,JSrealB.Config.get("feature.sentence_type.alias")+"."+JSrealB.Config.get("feature.sentence_type.interrogative"),!1),this.setCtx(JSrealB.Config.get("feature.sentence_type.interrogative"),!0),!0},S_EN.prototype.interrogationForm=function(a){var b=!1;switch(a){case JSrealB.Config.get("feature.sentence_type.interro_prefix.where"):case JSrealB.Config.get("feature.sentence_type.interro_prefix.how"):break;case JSrealB.Config.get("feature.sentence_type.interro_prefix.whoSubject"):var c=getSubject(this);c!=-1&&(this.deleteElement(c),b=!0);break;case JSrealB.Config.get("feature.sentence_type.interro_prefix.whoDirect"):case JSrealB.Config.get("feature.sentence_type.interro_prefix.whatDirect"):var d=getGroup(this,JSrealB.Config.get("feature.category.phrase.verb")),e=getGroup(this.elements[d],JSrealB.Config.get("feature.category.phrase.noun"));d!=-1&&e!=-1&&(this.elements[d].deleteElement(e),b=!0);break;case JSrealB.Config.get("feature.sentence_type.interro_prefix.whoIndirect"):var d=getGroup(this,JSrealB.Config.get("feature.category.phrase.verb")),f=getGroup(this.elements[d],JSrealB.Config.get("feature.category.phrase.prepositional"));d!=-1&&f!=-1&&(this.elements[d].deleteElement(f),b=!0)}switch(a){case JSrealB.Config.get("feature.sentence_type.interro_prefix.whoDirect"):case JSrealB.Config.get("feature.sentence_type.interro_prefix.whatDirect"):case JSrealB.Config.get("feature.sentence_type.interro_prefix.whoIndirect"):case JSrealB.Config.get("feature.sentence_type.interro_prefix.where"):case JSrealB.Config.get("feature.sentence_type.interro_prefix.how"):case JSrealB.Config.get("feature.sentence_type.interro_prefix.whoSubject"):var g=JSrealB.Config.get("rule.sentence_type.int.prefix")[a]+" "+this.getCtx("firstAux");this.addNewElement(0,g);break;default:null!=this.getCtx("firstAux")&&this.addNewElement(0,this.getCtx("firstAux"))}return fetchFromObject(this.ctx,JSrealB.Config.get("feature.sentence_type.alias")+"."+JSrealB.Config.get("feature.sentence_type.interrogative"),!1),this.setCtx(JSrealB.Config.get("feature.sentence_type.interrogative"),!0),b};var CP=function(a){return this instanceof CP?void JSrealE.call(this,a,JSrealB.Config.get("feature.category.phrase.coordinated")):new CP(arguments)};extend(JSrealE,CP),CP.prototype.sortWord=function(){this.constituents.head=null;for(var a,b=0,c=this.elements.length;b<c;b++)switch(a=this.elements[b],a.category){case JSrealB.Config.get("feature.category.word.conjunction"):this.setCtx(JSrealB.Config.get("feature.category.word.conjunction"),a.unit);break;case JSrealB.Config.get("feature.category.phrase.noun"):case JSrealB.Config.get("feature.category.word.noun"):case JSrealB.Config.get("feature.category.phrase.adjective"):case JSrealB.Config.get("feature.category.word.adjective"):this.addConstituent(a,JSrealE.grammaticalFunction.subordinate);break;default:this.addConstituent(a,JSrealE.grammaticalFunction.complement)}return this},CP.prototype.elementToPhrasePropagation=function(a){var b=this.getChildrenProp(JSrealB.Config.get("feature.person.alias")),c=a.elements.length>0?a.getChildrenProp(JSrealB.Config.get("feature.person.alias")):a.getProp(JSrealB.Config.get("feature.person.alias"));if(null===b?a.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.person.alias")]):b===JSrealB.Config.get("feature.person.p1")||c===JSrealB.Config.get("feature.person.p1")?a.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.person.alias")],[JSrealB.Config.get("feature.person.p1")]):b===JSrealB.Config.get("feature.person.p2")||c===JSrealB.Config.get("feature.person.p2")?a.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.person.alias")],[JSrealB.Config.get("feature.person.p2")]):a.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.person.alias")],[JSrealB.Config.get("feature.person.p3")]),this.elements.length<=2)a.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.number.alias")],[JSrealB.Config.get("feature.number.singular")]);else{var d=this.getCtx(JSrealB.Config.get("feature.category.word.conjunction"));d==JSrealB.Config.get("rule.union")?a.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.number.alias")],[this.getProp(JSrealB.Config.get("feature.number.alias"))||JSrealB.Config.get("feature.number.singular")]):a.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.number.alias")],[JSrealB.Config.get("feature.number.plural")])}var e=this.getChildrenProp(JSrealB.Config.get("feature.gender.alias")),f=a.elements.length>0?a.getChildrenProp(JSrealB.Config.get("feature.gender.alias")):a.getProp(JSrealB.Config.get("feature.gender.alias"));return null===e?a.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.gender.alias")]):e!==f&&a.bottomUpFeaturePropagation(this,[JSrealB.Config.get("feature.gender.alias")],[JSrealB.Config.get("feature.gender.masculine")]),this};var VP=function(a){return this instanceof VP?void JSrealE.call(this,a,JSrealB.Config.get("feature.category.phrase.verb")):JSrealB.Config.get("language")===JSrealE.language.french?new VP_FR(arguments):new VP_EN(arguments)};extend(JSrealE,VP),VP.prototype.sortWord=function(){for(var a=0,b=this.elements.length;a<b;a++){var c=this.elements[a];switch(c.category){case JSrealB.Config.get("feature.category.word.verb"):this.addConstituent(c,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.phrase.adjective"):case JSrealB.Config.get("feature.category.word.adjective"):case JSrealB.Config.get("feature.category.phrase.coordinated"):this.addConstituent(c,JSrealE.grammaticalFunction.subordinate);break;default:this.addConstituent(c,JSrealE.grammaticalFunction.complement)}}return this};var VP_FR=function(a){VP.call(this,a)};extend(VP,VP_FR);var VP_EN=function(a){VP.call(this,a)};extend(VP,VP_EN);var NP=function(a){return this instanceof NP?void JSrealE.call(this,a,JSrealB.Config.get("feature.category.phrase.noun")):JSrealB.Config.get("language")===JSrealE.language.french?new NP_FR(arguments):new NP_EN(arguments)};extend(JSrealE,NP),NP.prototype.sortWord=function(){};var NP_FR=function(a){NP.call(this,a)};extend(NP,NP_FR),NP_FR.prototype.sortWord=function(){for(var a=0,b=this.elements.length;a<b;a++){var c=this.elements[a];switch(c.category){case JSrealB.Config.get("feature.numerical.alias"):this.addConstituent(c,JSrealE.grammaticalFunction.modifier);break;case JSrealB.Config.get("feature.category.phrase.noun"):case JSrealB.Config.get("feature.category.word.noun"):case JSrealB.Config.get("feature.category.word.pronoun"):case JSrealB.Config.get("feature.category.phrase.coordinated"):void 0===this.constituents.head?this.addConstituent(c,JSrealE.grammaticalFunction.head):this.addConstituent(c,JSrealE.grammaticalFunction.complement);break;case JSrealB.Config.get("feature.category.word.determiner"):case JSrealB.Config.get("feature.category.word.adverb"):case JSrealB.Config.get("feature.category.phrase.adverb"):case JSrealB.Config.get("feature.category.word.adjective"):case JSrealB.Config.get("feature.category.phrase.adjective"):case JSrealB.Config.get("feature.category.phrase.propositional"):case JSrealB.Config.get("feature.category.word.verb"):this.addConstituent(c,JSrealE.grammaticalFunction.subordinate);break;default:this.addConstituent(c,JSrealE.grammaticalFunction.complement)}}return this},NP.prototype.elementToElementPropagation=function(a){if(a.fct===JSrealE.grammaticalFunction.modifier)null!==this.constituents.head&&a.siblingFeaturePropagation(this.constituents.head);else if(a.fct===JSrealE.grammaticalFunction.head){if(this.constituents.modifier.length>0)for(var b=0,c=this.constituents.modifier.length;b<c;b++)a.siblingFeaturePropagation(this.constituents.modifier[b]);for(var b=0,c=this.constituents.subordinate.length;b<c;b++)if("SP"==this.constituents.subordinate[b].category){var e,f,d=Object.keys(a.prop).concat(Object.keys(a.defaultProp)),g={};for(e=0,f=d.length;e<f;e++)g[d[e]]=a.getProp(d[e]);if(JSrealB.Config.get("language")===JSrealE.language.french){var h=this.constituents.subordinate[b].getFirst("Pro");if(h.unit==JSrealB.Config.get("rule.propositional.base"))this.constituents.subordinate[b].setProp(JSrealB.Config.get("feature.cdInfo.alias"),g);else if(h.unit==JSrealB.Config.get("rule.propositional.subject"))for(var i in g)h.setProp(i,g[i])}else{var j=this.constituents.subordinate[b].getFirst("any");if(j.unit==JSrealB.Config.get("rule.propositional.subject"))for(var i in g)j.setProp(i,g[i])}}else a.siblingFeaturePropagation(this.constituents.subordinate[b])}},NP.prototype.pro=function(){return this.setCtx(JSrealB.Config.get("feature.toPronoun.alias"),!0)};var NP_EN=function(a){NP.call(this,a)};extend(NP,NP_EN),NP_EN.prototype.sortWord=function(){for(var a=0,b=this.elements.length;a<b;a++){var c=this.elements[a];switch(c.category){case JSrealB.Config.get("feature.numerical.alias"):this.addConstituent(c,JSrealE.grammaticalFunction.modifier);break;case JSrealB.Config.get("feature.category.word.noun"):case JSrealB.Config.get("feature.category.phrase.noun"):case JSrealB.Config.get("feature.category.word.pronoun"):case JSrealB.Config.get("feature.category.phrase.coordinated"):this.addConstituent(c,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.word.determiner"):case JSrealB.Config.get("feature.category.phrase.propositional"):this.addConstituent(c,JSrealE.grammaticalFunction.subordinate);break;default:this.addConstituent(c,JSrealE.grammaticalFunction.complement)}}return this};var AP=function(a){return this instanceof AP?void JSrealE.call(this,a,JSrealB.Config.get("feature.category.phrase.adjective")):JSrealB.Config.get("language")===JSrealE.language.french?new AP_FR(arguments):new AP_EN(arguments)};extend(JSrealE,AP),AP.prototype.sortWord=function(){for(var a=0,b=this.elements.length;a<b;a++){var c=this.elements[a];switch(c.category){case JSrealB.Config.get("feature.category.phrase.adjective"):case JSrealB.Config.get("feature.category.word.adjective"):this.addConstituent(c,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.word.adverb"):case JSrealB.Config.get("feature.category.phrase.adverb"):case JSrealB.Config.get("feature.category.word.preposition"):case JSrealB.Config.get("feature.category.phrase.prepositional"):case JSrealB.Config.get("feature.category.phrase.propositional"):default:this.addConstituent(c,JSrealE.grammaticalFunction.complement)}}return this};var AP_FR=function(a){AP.call(this,a)};extend(AP,AP_FR);var AP_EN=function(a){AP.call(this,a)};extend(AP,AP_EN);var AdvP=function(a){return this instanceof AdvP?void JSrealE.call(this,a,JSrealB.Config.get("feature.category.phrase.adverb")):JSrealB.Config.get("language")===JSrealE.language.french?new AdvP_FR(arguments):new AdvP_EN(arguments)};extend(JSrealE,AdvP),AdvP.prototype.sortWord=function(){};var AdvP_FR=function(a){AdvP.call(this,a)};extend(AdvP,AdvP_FR),AdvP_FR.prototype.sortWord=function(){for(var a=0,b=this.elements.length;a<b;a++){var c=this.elements[a];switch(c.category){case JSrealB.Config.get("feature.category.phrase.adverb"):case JSrealB.Config.get("feature.category.word.adverb"):this.addConstituent(c,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.word.preposition"):case JSrealB.Config.get("feature.category.phrase.prepositional"):case JSrealB.Config.get("feature.category.phrase.propositional"):default:this.addConstituent(c,JSrealE.grammaticalFunction.complement)}}return this};var AdvP_EN=function(a){AdvP.call(this,a)};extend(AdvP,AdvP_EN),AdvP_EN.prototype.sortWord=function(){for(var a=0,b=this.elements.length;a<b;a++){var c=this.elements[a];switch(c.category){case JSrealB.Config.get("feature.category.word.adverb"):this.addConstituent(c,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.phrase.adverb"):case JSrealB.Config.get("feature.category.word.preposition"):case JSrealB.Config.get("feature.category.phrase.prepositional"):case JSrealB.Config.get("feature.category.phrase.propositional"):default:this.addConstituent(c,JSrealE.grammaticalFunction.complement)}}return this};var PP=function(a){return this instanceof PP?void JSrealE.call(this,a,JSrealB.Config.get("feature.category.phrase.prepositional")):JSrealB.Config.get("language")===JSrealE.language.french?new PP_FR(arguments):new PP_EN(arguments)};extend(JSrealE,PP),PP.prototype.sortWord=function(){for(var a=0,b=this.elements.length;a<b;a++){var c=this.elements[a];switch(c.category){case JSrealB.Config.get("feature.category.word.preposition"):this.addConstituent(c,JSrealE.grammaticalFunction.head);break;case JSrealB.Config.get("feature.category.word.verb"):case JSrealB.Config.get("feature.category.phrase.verb"):default:this.addConstituent(c,JSrealE.grammaticalFunction.complement)}}return this};var PP_FR=function(a){PP.call(this,a)};extend(PP,PP_FR);var PP_EN=function(a){PP.call(this,a)};extend(PP,PP_EN);var DT=function(a){return this instanceof DT?void JSrealE.call(this,a,JSrealB.Config.get("feature.date.alias"),JSrealE.ruleType.date):new DT(a)};extend(JSrealE,DT);var NO=function(a){return this instanceof NO?void JSrealE.call(this,a,JSrealB.Config.get("feature.numerical.alias"),JSrealE.ruleType.number):new NO(a)};extend(JSrealE,NO);var JSrealB=function(){return{init:function(a,b,c,d){this.Config.set({language:a,lexicon:b,rule:c,feature:d,isDevEnv:!0,printTrace:!1,db:null})}}}();JSrealB.Module={},JSrealB.Module.Punctuation=function(){var a={start:1,end:2},b=function(b,e,f){var g="";if(e===a.start){g=ltrim(b);var h="",i=g;do h=g.charAt(0),c(h)&&void 0===f[JSrealB.Config.get("feature.typography.complementary")]&&void 0===d(h)[JSrealB.Config.get("feature.typography.complementary")]&&(g=g.substring(1)),i=g;while(i!==g);g=ltrim(g)}else if(e===a.end){g=rtrim(b);var j="",i=g;do j=g.charAt(g.length-1),c(j)&&void 0===f[JSrealB.Config.get("feature.typography.complementary")]&&void 0===d(j)[JSrealB.Config.get("feature.typography.complementary")]&&(g=g.substring(0,g.length-1)),i=g;while(i!==g);g=rtrim(g)}return g},c=function(a){return"undefined"!=typeof JSrealB.Config.get("lexicon")[a]&&"undefined"!=typeof JSrealB.Config.get("lexicon")[a][JSrealB.Config.get("feature.category.word.punctuation")]},d=function(a){var b=null;if(!c(a))throw JSrealB.Exception.wrongPunctuation(a);return b=JSrealB.Config.get("lexicon")[a][JSrealB.Config.get("feature.category.word.punctuation")]},e=function(a){var b=JSrealB.Config.get("rule").punctuation[a];if(void 0===b)throw JSrealB.Exception.tableNotExists("unknown",a);return b},f=function(c,f){var g=d(f),h=e(g.tab[0]);return h[JSrealB.Config.get("feature.typography.before")]+f+h[JSrealB.Config.get("feature.typography.after")]+b(c,a.start,g)},g=function(c,f){var g=d(f),h=e(g.tab[0]);return b(c,a.end,g)+h[JSrealB.Config.get("feature.typography.before")]+f+h[JSrealB.Config.get("feature.typography.after")]},h=function(a,b){var c=a,h=d(b);if(h.tab.length>1){var i=null,j=e(h.tab[0]),k=e(h.tab[1]);j[JSrealB.Config.get("feature.typography.position.alias")]!==JSrealB.Config.get("feature.typography.position.left")&&(i=j,j=k,k=i),c=trim(c),c=j[JSrealB.Config.get("feature.typography.before")]+b+j[JSrealB.Config.get("feature.typography.after")]+c+k[JSrealB.Config.get("feature.typography.before")]+b+k[JSrealB.Config.get("feature.typography.after")]}else{if(void 0===h[JSrealB.Config.get("feature.typography.complementary")])throw JSrealB.Exception.pcMarkNotSupported(b);var l=h[JSrealB.Config.get("feature.typography.complementary")],m=e(h.tab[0]),n=b,o=l;m[JSrealB.Config.get("feature.typography.position.alias")]!==JSrealB.Config.get("feature.typography.position.left")&&(n=l,o=b);var p=f(trim(c),n),q=g(p,o);trim(c)!==trim(p)&&trim(p)!==q&&(c=trim(c),c=q)}return c};return{before:function(a,b){try{return f(a,b)}catch(b){return"[["+a+"]]"}},after:function(a,b){try{return g(a,b)}catch(b){return"[["+a+"]]"}},surround:function(a,b){try{return h(a,b)}catch(b){return"[["+a+"]]"}},isValid:function(a){return c(a)}}}(),JSrealB.Module.Declension=function(){var a=function(a,b,c){b.g==JSrealB.Config.get("feature.gender.either")&&(b.g=JSrealB.Config.get("feature.gender.masculine"));var d=getValueByFeature(c.declension,b);return null!==d&&stem(a,c.ending)+d},b=function(b,c,d){var e=JSrealB.Module.Common.getWordFeature(b,c);void 0===d&&(d={});for(var f=[],g=0,h=e.tab.length;g<h;g++)f[g]=JSrealB.Config.get("rule").declension[e.tab[g]];if(void 0!==d[JSrealB.Config.get("feature.gender.alias")]&&void 0!==e[JSrealB.Config.get("feature.gender.alias")]&&e[JSrealB.Config.get("feature.gender.alias")]===JSrealB.Config.get("feature.gender.either")&&(d[JSrealB.Config.get("feature.gender.alias")]=JSrealB.Config.get("feature.gender.masculine")),"fr"==JSrealB.Config.get("language")&&d.g==JSrealB.Config.get("feature.gender.neuter")&&c!=JSrealB.Config.get("feature.category.word.pronoun")&&(d[JSrealB.Config.get("feature.gender.alias")]=JSrealB.Config.get("feature.gender.masculine")),f.length>0){var i=!1,j=0;do i=a(b,d,f[j]),j++;while(i===!1&&j<f.length);if(i===!1)throw JSrealB.Exception.wrongDeclension(b,c,JSON.stringify(d));return i}throw JSrealB.Exception.tableNotExists(b,e.tab)};return{decline:function(a,c,d){var e=null;try{e=b(a,c,d)}catch(b){return"[["+a+"]]"}return e}}}(),JSrealB.Module.Conjugation=function(){var a=function(a,e,h,i,j,k,l,m){k=k||{},l=l||{};try{if(JSrealB.Config.get("language")==JSrealE.language.french){if(void 0!=m)var n=m;else var o=JSrealB.Module.Common.getWordFeature(a,JSrealB.Config.get("feature.category.word.verb")).aux,n=JSrealB.Config.get("rule.compound.aux")[o];if(1==k.neg||"string"==typeof k.neg&&contains(JSrealB.Config.get("rule.verb_option.neg.autres"),k.neg)){var p=JSrealB.Config.get("rule.verb_option.neg.prep1")+" ";1==k.neg&&e!=JSrealB.Config.get("feature.tense.base")?k.neg=JSrealB.Config.get("rule.verb_option.neg.prep2"):e==JSrealB.Config.get("feature.tense.base")&&(p+=JSrealB.Config.get("rule.verb_option.neg.prep2")+" ",k.neg="")}else var p=k.neg="";return p+=void 0!==j[JSrealB.Config.get("feature.tense.alias")][e]?c(a,e,h,i,j,k,l):d(a,n,e,h,i,j,k,l),p+=1==k.pas&&1==k.hasSubject?" par":""}return e==JSrealB.Config.get("feature.tense.imperative.present")&&(e=JSrealB.Config.get("feature.tense.base")),void 0!==j[JSrealB.Config.get("feature.tense.alias")][e]&&1==k.native?"be"==a?b(a,e,h,j)+(1==k.neg?" "+JSrealB.Config.get("rule.verb_option.neg.prep1"):""):1==k.prog||1==k.pas||1==k.perf?g(a,e,h,j,k):f(a,e,h,j,k):g(a,e,h,j,k)}catch(b){throw JSrealB.Exception.wrongTense(a,e)}throw JSrealB.Exception.wrongTense(a,e)},b=function(a,b,c,d){if(null===c||"string"==typeof d.t[b])return stem(a,d.ending)+d.t[b];if(void 0!==d.t[b][c-1]&&null!==d.t[b][c-1])return stem(a,d.ending)+d.t[b][c-1];throw JSrealB.Exception.wrongPerson(a,c)},c=function(a,c,d,f,g,i,j){if(i=i||{},j=j||{},1==i.pas||1==i.prog){var k=h(JSrealB.Config.get("rule.verb_option.prog.aux"),c,d,g);if(1==!i.prog){JSrealB.Config.get("rule.verb_option.prog.aux")}}else if(c==JSrealB.Config.get("feature.tense.participle.past")){k=b(a,c,d,g);var m=JSrealB.Config.get("rule.declension").n28,n={g:f,n:d>3?JSrealB.Config.get("feature.number.plural"):JSrealB.Config.get("feature.number.singular")},o=getValueByFeature(m.declension,n);if(null===o)return k;var k=stem(k,m.ending)+o}else k=b(a,c,d,g);return k+=""!=i.neg?" ":"",k+=c!=JSrealB.Config.get("feature.tense.base")?i.neg:"",k+=1==i.prog?" "+JSrealB.Config.get("rule.verb_option.prog.keyword"):"",k+=1==i.pas&&1==i.prog?" "+JSrealB.Config.get("rule.verb_option.prog.aux"):"",1!=i.pas&&1!=i.prog||(k+=1==i.pas?" "+e(a,d,f,JSrealB.Config.get("feature.tense.participle.past"),{},JSrealB.Config.get("rule.verb_option.prog.aux")):" "+b(a,JSrealB.Config.get("feature.tense.base"),d,g)),k},d=function(a,c,d,f,g,i,j,k){j=j||{},k=k||{};var l=1==j.prog?h(JSrealB.Config.get("rule.verb_option.prog.aux"),JSrealB.Config.get("rule.compound")[d].progAuxTense,f):h(c,JSrealB.Config.get("rule.compound")[d].auxTense,f);return l+=""!=j.neg?" ":"",l+=j.neg,l+=1==j.prog?" "+JSrealB.Config.get("rule.verb_option.prog.keyword"):"",1==j.pas&&(l+=" "+h("être",1==j.prog?JSrealB.Config.get("feature.tense.base"):JSrealB.Config.get("feature.tense.participle.past"),f),c="être"),l+=1==j.prog&&1==!j.pas?" "+b(a,JSrealB.Config.get("feature.tense.base"),f,i):" "+e(a,f,g,JSrealB.Config.get("feature.tense.participle.past"),k,c)},e=function(a,b,c,d,e,f){e=e||{};var g=h(a,d,b),i=JSrealB.Config.get("rule.declension").n28;if("être"==f)var j={g:c,n:b>3?"p":"s"};else{if(void 0==e)return g;var j={g:e.g,n:e.n}}var k=getValueByFeature(i.declension,j);if(null===k)return g;var l=stem(g,i.ending)+k;return l},f=function(a,c,d,e,f){if(f=f||{},void 0!==e[JSrealB.Config.get("feature.tense.alias")][c]){if(1==f.interro||contains(JSrealB.Config.get("feature.sentence_type.interro_prefix"),f.interro)||"old"==f.interro){var g=c==JSrealB.Config.get("feature.tense.base")?"":h("do",c,d);return g+=1==f.neg?" "+JSrealB.Config.get("rule.verb_option.neg.prep1"):"",g+" "+h(a,"b",d)}if(1==f.neg){var g=c==JSrealB.Config.get("feature.tense.base")?"":h("do",c,d);return g+=" "+JSrealB.Config.get("rule.verb_option.neg.prep1")+" "+h(a,"b",d)}return b(a,c,d,e)}if("f"==c){var i=JSrealB.Config.get("rule.compound.future.aux"),g=h(i,"b",d);return g+=1==f.neg?" not":"",g+=" "+b(a,"b",d,e)}throw JSrealB.Exception.wrongTense(a,c)},g=function(a,b,c,d,e){e=e||{};var g=1==e.hasSubject;if(e.hasSubject=!1,1==e.pas)var i=JSrealB.Config.get("rule.compound.passive.participle");else if(1==e.prog)var i=JSrealB.Config.get("rule.compound.continuous.participle");else if(1==e.perf)var i=JSrealB.Config.get("rule.compound.perfect.participle");else var i=b;if(1==e.pas){e.pas=!1;var j=h(JSrealB.Config.get("rule.compound.passive.aux"),b,c,"",e)}else if(1==e.prog){e.prog=!1;var j=h(JSrealB.Config.get("rule.compound.continuous.aux"),b,c,"",e)}else{if(1!=e.perf)return 1==e.neg?"f"==b?f(a,b,c,d,e):f(a,b,c,d)+" "+JSrealB.Config.get("rule.verb_option.neg.prep1"):f(a,b,c,d);e.perf=!1;var j=h(JSrealB.Config.get("rule.compound.perfect.aux"),b,c,"",e)}var k=j+" "+h(a,i,c);return k+=g?" by":""},h=function(b,c,d,e,f,g,h){e=e||"",f=f||{},g=g||{},h=h||void 0;var i=JSrealB.Module.Common.getWordFeature(b,JSrealB.Config.get("feature.category.word.verb")),j=JSrealB.Config.get("rule").conjugation[i.tab];if(void 0!==j)return"ip"==c&&(f.prog=!1),a(b,c,d,e,j,f,g,h);throw JSrealB.Exception.tableNotExists(b,i.tab)};return{conjugate:function(a,b,c,d,e,f,g){var i=null;try{i=h(a,b,c,d,e,f,g)}catch(b){return"[["+a+"]]"}return i}}}(),JSrealB.Module.RegularRule=function(){var a=function(a,b,c){var d=getValueByFeature(c.option,b);return null!==d&&stem(a,c.ending)+d},b=function(b,c,d){var e=JSrealB.Module.Common.getWordFeature(b,c),f=[];for(var g in e.tab)f[g]=JSrealB.Config.get("rule").regular[e.tab[g]];if(f.length>0){var h=!1,i=0;do h=a(b,d,f[i]),i++;while(h===!1&&i<f.length);if(h===!1)throw JSrealB.Exception.wrongRule(b,JSON.stringify(d));return h}throw JSrealB.Exception.tableNotExists(b,e.tab)};return{apply:function(a,c,d){var e=null;try{var f=void 0===d?{}:d;e=b(a,c,f)}catch(b){return"[["+a+"]]"}return e}}}(),JSrealB.Module.Common=function(){var a=function(a,b,c){var d=JSrealB.Config.get("lexicon")[a];if(void 0!==d){if(void 0!==d[b])return d[b];if(void 0===c||c===!1)throw JSrealB.Exception.wordNotExists(a,b);return null}if(void 0===c||c===!1)throw JSrealB.Exception.wordNotExists(a);return null};return{getWordFeature:function(b,c,d){return a(b,c,d)}}}(),JSrealB.Module.Date=function(){var year,month,date,day,hour,minute,second,customValue,getYear=function(){return year},getMonth=function(){return month},getDate=function(){return date},getDay=function(){return day},getHour=function(){return hour},getMinute=function(){return minute},getSecond=function(){return second},getCustomValue=function(){return customValue},applyTextualDateRule=function(a,b){if(isNumeric(a)){var c=JSrealB.Config.get("rule").date.text[b];if(void 0!==c&&void 0!==c[a])return c[a];throw JSrealB.Exception.wrongDate(b)}},numberToMonth=function(a){try{return applyTextualDateRule(a,"month")}catch(b){return"[["+a+"]]"}},numberToDay=function(a){try{return applyTextualDateRule(a,"weekday")}catch(b){return"[["+a+"]]"}},numberWithLeadingZero=function(a){if(isNumeric(a)){var b=getInt(a).toString();return b.length<2&&(b="0"+b),b.toString()}return"[["+a+"]]"},numberWithoutLeadingZero=function(a){return isNumeric(a)?getInt(a).toString():"[["+a+"]]"},numberToMeridiem=function(a){return applyTextualDateRule(getInt(a)<12?0:1,"meridiem")},numberTo12hour=function(a){return isNumeric(a)?numberWithLeadingZero(getInt(a)>=12?getInt(a)-12:a):"[["+a+"]]"},doNothing=function(a){return a},format={Y:{param:getYear,func:numberWithoutLeadingZero},F:{param:getMonth,func:numberToMonth},m:{param:getMonth,func:numberWithLeadingZero},d:{param:getDate,func:numberWithLeadingZero},j:{param:getDate,func:numberWithoutLeadingZero},l:{param:getDay,func:numberToDay},A:{param:getHour,func:numberToMeridiem},h:{param:getHour,func:numberTo12hour},H:{param:getHour,func:numberWithLeadingZero},i:{param:getMinute,func:numberWithLeadingZero},s:{param:getSecond,func:numberWithLeadingZero},x:{param:getCustomValue,func:doNothing}},getPatternKey=function(elementDisplayed,allElementList,separator){for(var key="",i=0,length=allElementList.length;i<length;i++)"second"===allElementList[i]&&0===getInt(eval(allElementList[i]))||(key+=void 0!==elementDisplayed&&void 0!==elementDisplayed[allElementList[i]]&&elementDisplayed[allElementList[i]]===!1?"":allElementList[i]+separator);return key=trim(key),key.length>0?key.substring(0,key.length-1):null},singlePatternRealization=function(a){return void 0!==format[a]?format[a].func(format[a].param()):"[["+a+"]]"},patternRealization=function(a){for(var b,c="",d=null,e=0,f=a.length;e<f;e++)b=a.charAt(e),"["===b?d="":"]"===b?(c+=singlePatternRealization(d),d=null):null!==d?d+=b:c+=b;return c},setFullDate=function(a){year=a.getFullYear(),month=a.getMonth()+1,date=a.getDate(),day=a.getDay(),hour=a.getHours(),minute=a.getMinutes(),second=a.getSeconds()},removeDeterminer=function(a,b){var c=a;if(void 0!==b&&b===!1){var d=c.indexOf("[");d>=0&&(c=c.substring(d))}return c},dateRealization=function(a,b,c,d,e){var f="";if(null!==c&&void 0!==b[c]){var g=removeDeterminer(b[c],e);f=patternRealization(g)}var h="";if(null!==d&&void 0!==b[d]){var i=removeDeterminer(b[d],e);h=patternRealization(i)}return trim(f+" "+h)},toWord=function(a,b){setFullDate(a);var c=getPatternKey(b,["year","month","date","day"],"-"),d=getPatternKey(b,["hour","minute","second"],":"),e=JSrealB.Config.get("rule").date.format.natural;return dateRealization(a,e,c,d,void 0!==b?b.det:void 0)},formatter=function(a,b){setFullDate(a);var c=getPatternKey(b,["year","month","date","day"],"-"),d=getPatternKey(b,["hour","minute","second"],":"),e=JSrealB.Config.get("rule").date.format.non_natural;return dateRealization(a,e,c,d)},realDayDiff=function(a,b){var c=a.getTime()-b.getTime(),d=c/864e5;return getFloat(d)},relativeDayDiff=function(a,b){var c=new Date,d=getInt(Math.ceil(realDayDiff(a,b)));return c.setDate(c.getDate()+d),c.getDate()!==a.getDate()&&d--,d},toRelativeTime=function(a,b){setFullDate(a);var c=new Date,d=relativeDayDiff(a,c),e=JSrealB.Config.get("rule").date.format.relative_time;return void 0===e[d]&&(customValue=Math.abs(d),d=d<0?"-":"+"),dateRealization(a,e,d.toString(),null)};return{
toWord:function(a,b){return toWord(a,b)},formatter:function(a,b){return formatter(a,b)},toRelativeTime:function(a,b){return toRelativeTime(a,b)}}}(),JSrealB.Module.Number=function(){function f(a,b){function g(a){return a.length>3?g(a.slice(0,a.length-3)).concat([a.slice(a.length-3)]):(1==a.length?a="00"+a:2==a.length&&(a="0"+a),[a])}function h(a){return 0==a.length||"000"==a[0]&&h(a.slice(1))}function i(a){var f=a.length;c&&console.log("grouper:"+f+":"+a);var g=a[0];if(1==f)return j(g);var k=a.slice(1);if("000"==g)return i(k);var l=b?e:d;return("001"==g?l[f-2].sing:i([g])+" "+l[f-2].plur)+" "+(h(k)?"":i(k))}function j(a){if(c&&console.log("centaines:"+a),1==a.length)return l(a);if(2==a.length)return k(a);var d=a[0],e=a.slice(1);if("0"==d)return k(e);var f=b?"hundred":"cent";return"00"==e?"1"==d?(b?"one ":"")+f:l(d)+" "+f+(b?"":"s"):"1"==d?(b?"one ":"")+f+" "+k(e):l(d)+" "+f+(b?" and ":" ")+k(e)}function k(a){c&&console.log("dizaines:",a);var d=a[0],e=a[1];switch(d){case"0":return l(e);case"1":return(b?["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"]:["dix","onze","douze","treize","quatorze","quinze","seize","dix-sept","dix-huit","dix-neuf"])[+e];case"2":case"3":case"4":case"5":case"6":var f=(b?["twenty","thirty","forty","fifty","sixty"]:["vingt","trente","quarante","cinquante","soixante"])[d-2];return 0==e?f:f+("1"==e?b?"-one":" et un":"-"+l(e));case"7":return 0==e?b?"seventy":"soixante-dix":b?"seventy-"+l(e):"soixante-"+k("1"+e);case"8":return 0==e?b?"eighty":"quatre-vingts":(b?"eighty-":"quatre-vingt-")+l(e);case"9":return 0==e?b?"ninety":"quatre-vingt-dix":b?"ninety-"+l(e):"quatre-vingt-"+k("1"+e)}}function l(a){return(b?["zero","one","two","three","four","five","six","seven","eight","nine"]:["zéro","un","deux","trois","quatre","cinq","six","sept","huit","neuf"])[+a]}var c=!1,d=[{sing:"mille",plur:"mille"},{sing:"un million",plur:"millions"},{sing:"un milliard",plur:"milliards"},{sing:"un trillion",plur:"trillions"},{sing:"un quatrillion",plur:"quatrillions"},{sing:"un quintillion",plur:"quintillions"}],e=[{sing:"one thousand",plur:"thousand"},{sing:"one million",plur:"million"},{sing:"one billion",plur:"billion"},{sing:"one trillion",plur:"trillion"},{sing:"one quatrillion",plur:"quatrillion"},{sing:"one quintillion",plur:"quintillion"}],f=21;if("number"==typeof a&&(a=""+a),!/^-?\d+$/.test(a))throw"nombreChaineEnLettres ne traite que des chiffres:"+a;var m=!1;if("-"==a[0]&&(m=!0,a=a.slice(1)),a.length>f)throw"nombreChaineEnLettres ne traite que les nombres d'au plus "+f+" chiffres:"+a;return(m?b?"minus ":"moins ":"")+i(g(a)).trim()}var a=function(a,e,g,h,i){var h=h||"fr";void 0!==g&&g(d(b(a,e,".","")));var k=(c(a,e,g),f(parseInt(a),"en"==h,i));return"fr"==h&&"un"==k&&"f"==i&&(k+="e"),k},b=function(a,b,c,d){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+a)?+a:0,f=isFinite(+b)?Math.abs(b):0,g="undefined"==typeof d?"":d,h="undefined"==typeof c?".":c,i="",j=function(a,b){var c=Math.pow(10,b);return""+(Math.round(a*c)/c).toFixed(b)};return i=(f?j(e,f):""+Math.round(e)).split("."),i[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,g)),(i[1]||"").length<f&&(i[1]=i[1]||"",i[1]+=new Array(f-i[1].length+1).join("0")),i.join(h)},c=function(a,c,e){var f=void 0===c?2:c,g=JSrealB.Config.get("rule").number;f=nbDecimal(a)>f?f:nbDecimal(a);var h=b(a,f,g.symbol.decimal,g.symbol.group);return void 0!==e&&e(d(b(a,f,".",""))),h},d=function(a){var b=getInt(a);return b>=-1&&b<=1?JSrealB.Config.get("feature.number.singular"):JSrealB.Config.get("feature.number.plural")},e=function(a){return void 0!==a&&isNumeric(a)};return{formatter:function(a,b,d){var f=null;console.log(b[0]),console.log(b[1]);try{if(!e(a))throw JSrealB.Exception.wrongNumber(a);return f=c(a,b,d)}catch(b){return"[["+a+"]]"}},toWord:function(b,c,d,f,g){var h=null;try{if(!e(b))throw JSrealB.Exception.wrongNumber(b);return h=a(b,c,d,f,g)}catch(a){return"[["+b+"]]"}},getGrammaticalNumber:function(a){var b=null;try{if(!e(a))throw JSrealB.Exception.wrongNumber(a);return b=d(a)}catch(b){return"[["+a+"]]"}},getNumberFormat:function(a,c,d,e){return b(a,c,d,e)},toRelativeNumber:function(b){var c=null;try{if(!e(b))throw JSrealB.Exception.wrongNumber(b);return c=a(b,0,JSrealB.Config.get("feature.number.singular")),console.log(c),c}catch(a){return"[["+b+"]]"}}}}();var isString=function(a){return"string"==typeof a},isNumeric=function(a){return!isNaN(getFloat(a))&&isFinite(a)},nbDecimal=function(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0},isBoolean=function(a){return a===!0||a===!1},isObject=function(a){return"object"==typeof a&&!Array.isArray(a)},getInt=function(a){return parseInt(a,10)},getFloat=function(a){return parseFloat(a,10)},intVal=function(a){var b=a.split(" ").join("").match(/-?\d+/),c=null!==b?getInt(b[0]):null;return c},ltrim=function(a){return a.replace(/^\s+/,"")},rtrim=function(a){return a.replace(/\s+$/,"")},trim=function(a){return a.replace(/^\s+|\s+$/g,"")},stem=function(a,b){if(b.length>0){var c=a.length-b.length;if(c<0||a.substring(c)!==b)throw JSrealB.Exception.wrongEnding(a,b);return a.substring(0,c)}return a},inArray=function(a,b){return void 0!==b&&a.indexOf(b)>=0},contains=function(a,b){if(Array.isArray(a))return inArray(a,b);if(isObject(a)){var c=typeof b,d=!1;for(var e in a)if(typeof a[e]===c){if(a[e]===b){d=!0;break}}else if(d=contains(a[e],b))break;return d}return a===b},stripLeftHtml=function(a){return a.replace(/^<([^>]+)>/i,"")},fetchFromObject=function(a,b,c){if(void 0!==a){var d=b.indexOf(".");return d>-1?fetchFromObject(a[b.substring(0,d)],b.substr(d+1),c):void 0!==c?a[b]=c:a[b]}},addToObjectList=function(a,b,c){if(void 0!==a){var d=b.indexOf(".");return d>-1?fetchFromObject(a[b.substring(0,d)],b.substr(d+1),c):void 0!==c?a[b].push(c):a[b]}},getValueByFeature=function(a,b){for(var c=null,d=0,e=Object.keys(a).length,f=0,g={},h=0,i=0,j=0,k=0,l=0,m=null,n=0,o=0,p=1e3,q=null;d<e&&null===c;){for(f=0,j=0,k=0,l=0,h=Object.keys(a[d]).length,g=Object.keys(b),i=g.length;f<i;)!a[d].hasOwnProperty(g[f])||a[d][g[f]]!==b[g[f]]&&"x"!==a[d][g[f]]||null===b[g[f]]?a[d].hasOwnProperty(g[f])?k++:l++:j++,f++;j>=h-1&&j>n?(m=a[d],n=j,p=l):j>=h-1&&j===n&&k<o?(m=a[d],o=k,p=l):j>0&&0===k&&j>n&&l<=p&&(m=a[d],o=k,p=l),j===i||1===e&&0===k?c=a[d].val:1===h&&0===k&&(q=a[d].val),d++}return null!==c?c:null!==m?m.val:q};JSrealB.Request=function(){var a=function(a,b){var c=new XMLHttpRequest;return c.overrideMimeType&&c.overrideMimeType("application/json"),"withCredentials"in c?c.open(a,b,!0):"undefined"!=typeof XDomainRequest?(c=new XDomainRequest,c.open(a,b)):c=null,c},b=function(b,c,d){var e=a("GET",b);return e?(e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?c(e.responseText):d&&d(e.status,e.statusText))},void e.send(null)):void JSrealB.Logger.alert("HTTP Get Request not supported")};return{getJson:function(a,c,d){return"undefined"==typeof a?void d(610,"Incorrect url: "+a):void b(a,function(b){try{var e=JSON.parse(b);c(e)}catch(b){d(611,"JSON parsing error: "+b+" with "+a)}},d)}}}(),JSrealB.Config=function(){var a={language:JSrealE.language.english,isDevEnv:!1,printTrace:!1,lexicon:{},rule:{},feature:{}};return{add:function(b){var c={};for(var d in b)void 0===a[d]&&(a[d]=b[d],c[d]=a[d]);return c},set:function(b){var c={};for(var d in b)void 0!==a[d]&&(a[d]=b[d],c[d]=a[d]);return c},get:function(b){var c=fetchFromObject(a,b);return void 0!==c?c:(JSrealB.Logger.warning(b+" is not defined!"),null)}}}(),JSrealB.Exception=function(){var a={exception:{4501:{en:"doesn't exist in lexicon",fr:"n'est pas présent dans le lexique"},4502:{en:"isn't a valid number",fr:"n'est pas un nombre bien formé"},4503:{en:"has no rule with table id",fr:"n'a pas de règle avec l'id"},4504:{en:"has no ending",fr:"n'a pas la terminaison"},4505:{en:"doesn't conjugate in",fr:"ne se conjugue pas au"},4506:{en:"doesn't use this person or person doesn't exist, person =",fr:"n'utilise pas cette personne ou cette personne n'existe pas, person ="},4507:{en:"isn't a valid date, wrong format",fr:"n'est pas une date dans un format valide"},4508:{en:"doesn't decline with these properties, for category ",fr:"ne se décline pas avec ces propriétés, pour la catégorie"},4509:{en:"isn't a punctuation mark",fr:"n'est pas un signe de ponctuation"},4510:{en:"is not supported",fr:"n'est pas supporté"},4512:{en:"doesn't know rule with properties",fr:"ne connait pas de règle avec les propriétés"},4513:{en:"isn't a valid value for",fr:"n'est pas une valeur valide pour"},4514:{en:"has no headword",fr:"n'a pas de noeud"}}},b=function(b,c,d,e){var f=c+" "+a.exception[b][JSrealB.Config.get("language")];return void 0!==d&&(f+=" "+d),void 0!==e&&(f+=", "+e),JSrealB.Logger.warning(f),f};return{wordNotExists:function(a){return b(4501,a)},wrongNumber:function(a){return b(4502,a)},wrongDate:function(a){return b(4507,a)},tableNotExists:function(a,c){return b(4503,a,c)},wrongEnding:function(a,c){return b(4504,a,c)},wrongTense:function(a,c){return b(4505,a,c)},wrongDeclension:function(a,c,d){return b(4508,a,c,d)},wrongRule:function(a,c){return b(4512,a,c)},wrongPerson:function(a,c){return b(4506,a,c)},wrongPunctuation:function(a){return b(4509,a)},pcMarkNotSupported:function(a){return b(4510,a)},invalidInput:function(a,c){return b(4513,a,c)},headWordNotFound:function(a){return b(4514,a)}}}(),JSrealB.Logger=function(){var a=function(a){JSrealB.Config.get("isDevEnv")&&console.log("%cDebug: "+a,"background: #CEE3F6; color: black")},b=function(a){console.log(a)},c=function(a){"rule.compound.aux is not defined!"!=a&&console.warn(a),JSrealB.Config.get("printTrace")&&console.trace()},d=function(a){console.error(a),JSrealB.Config.get("printTrace")&&console.trace()};return{print:function(a){print(a)},debug:function(b){a(b)},info:function(a){b(a)},warning:function(a){c(a)},alert:function(a){d(a)}}}();var JSrealBResource={en:{},fr:{},common:{}},JSrealLoader=function(a,b,c){var d=a.language;if(void 0===d||Object.keys(JSrealBResource).indexOf(d)<0)return void c("Undefined or wrong language");if("undefined"!=typeof JSrealBResource[d].lexicon&&"undefined"!=typeof JSrealBResource[d].rule&&"undefined"!=typeof JSrealBResource.common.feature)return JSrealB.init(d,JSrealBResource[d].lexicon,JSrealBResource[d].rule,JSrealBResource.common.feature),void b();var e=a.lexiconUrl,f=a.ruleUrl,g=a.featureUrl;JSrealB.Request.getJson(e,function(a){JSrealBResource[d].lexicon=a,JSrealB.Request.getJson(f,function(e){JSrealBResource[d].rule=e,"undefined"!=typeof JSrealBResource.common.feature?(JSrealB.init(d,a,e,JSrealBResource.common.feature),b()):JSrealB.Request.getJson(g,function(c){JSrealBResource.common.feature=c,JSrealB.init(d,a,e,c),b()},function(a,b){JSrealB.Logger.alert("Dictionary loading : "+a+" : "+b),c&&c(b)})},function(a,b){JSrealB.Logger.alert("Rule loading : "+a+" : "+b),c&&c(b)})},function(a,b){JSrealB.Logger.alert("Lexicon loading : "+a+" : "+b),c&&c(b)})};